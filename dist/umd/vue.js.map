{"version":3,"file":"vue.js","sources":["../../myVue/compiler/generate.js","../../myVue/compiler/parse.js","../../myVue/compiler/index.js","../../myVue/vdom/patch.js","../../myVue/lifecycle.js","../../myVue/data/array.js","../../myVue/utils/util.js","../../myVue/state.js","../../myVue/vdom/index.js","../../myVue/myVue.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === 'style') {\r\n      let obj = {};\r\n      attr.value.split(';').forEach(item => {\r\n        let [key, value] = item.split(':');\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type == 1) {\r\n    return generate(node); // 生成元素节点字符串\r\n  } else {\r\n    let text = node.text;\r\n    // 如果是普通文本，不带{{}}\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`\r\n    }\r\n    let tokens = []; // 存放每一段代码\r\n    let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则式全局模式，需要每次使用前重置为零\r\n    let match, index; // 每次匹配到的结果\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index; // 保存匹配到的索引\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`)\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}\r\n\r\nfunction genChildren (children) {\r\n  if (children) {\r\n    return children.map(child => gen(child)).join(',');\r\n  }\r\n}\r\nexport function generate (ast) {\r\n  let code = `_c('${ast.tag}',${ast.attrs.length ? genProps(ast.attrs) : 'undefined'},${ast.children ? genChildren(ast.children) : ''})`;\r\n  return code;\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // aa-aa \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //aa:aa\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名  [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //[0] 标签的结束名字\r\n//    style=\"xxx\"   style='xxx'  style=xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\nexport function parseHTML (html) {\r\n\r\n  function createASTElement (tagName, attrs) {\r\n    return {\r\n      tag: tagName, // 标签名\r\n      type: 1, // 标签类型\r\n      children: [], // 孩子列表\r\n      attrs, // 属性集合\r\n      parent: null // 父元素\r\n    }\r\n  }\r\n  let root;\r\n  let currentParent;\r\n  let stack = [];\r\n  function start (tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    currentParent = element; // 当前解析的标签保存起来\r\n    stack.push(element);\r\n  }\r\n\r\n  function end () {\r\n    let element = stack.pop(); // 取出栈中的最后一个\r\n    currentParent = stack[stack.length - 1];\r\n    if (currentParent) { // 在闭合标签是可以知道这个标签的父亲是谁\r\n      element.parent = currentParent;\r\n      currentParent.children.push(element);\r\n    }\r\n  }\r\n\r\n  function chars (text) {\r\n    text = text.replace(/\\s/g, '');\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  while (html) { // 只要html不为空，就一直解析\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd == 0) {\r\n      // 肯定是标签\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length);\r\n        end(endTagMatch[1]); // 将结束标签传入\r\n        continue;\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd > 0) { // 是文本\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) { // 处理文本\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  function parseStartTag () {\r\n    const start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length);// 删除开始标签\r\n      // 如果直接是闭合标签了 说明没有属性\r\n      let end;\r\n      let attr;\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\r\n        advance(attr[0].length); //去掉当前属性\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n        return match;\r\n      }\r\n    }\r\n  }\r\n\r\n  return root;\r\n}","import { generate } from \"./generate\";\r\nimport { parseHTML } from \"./parse\";\r\n\r\nexport function compileToFunction (template) {\r\n  // html模板 -> render函数\r\n  // 1、需要将html代码转化成“ast”语法树 可以用ast书来描述语言本身\r\n\r\n  // 前端必须掌握的数据结构 （树）\r\n  let ast = parseHTML(template);\r\n  // 2、 优化静态节点\r\n  // ...\r\n\r\n  // 3、通过这颗树 重新生成代码\r\n  let code = generate(ast);\r\n  // 4、将字符串变成函数\r\n  let render = new Function(`with(this){return ${code}};`);\r\n  return render;\r\n}","export function patch (oldVnode, vnode) {\r\n  // _c('div',{id:\"app\",style:{\"color\":\" red\"}},_v(\"你好：\"),_c('span',undefined,_v(\"阳光的\"+_s(name)+\"大人\")),_c('div',{id:\"age\"},_v(_s(age))))\r\n  let el = createEle(vnode);\r\n  let parentElm = oldVnode.parentNode;\r\n  parentElm.insertBefore(el, oldVnode.nextsibling); // 当前的真实元素插入到app的后面\r\n  parentElm.removeChild(oldVnode);\r\n}\r\n\r\nfunction createEle (vnode) {\r\n  let { tag, children, key, data, text } = vnode;\r\n  if (typeof tag == 'string') {\r\n    vnode.el = document.createElement(tag);\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createEle(child));\r\n    });\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el;\r\n}","import { patch } from \"./vdom/patch\";\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    patch(vm.$el, vnode)\r\n  }\r\n}\r\nexport function mountComponent (vm, el) {\r\n  // 调用render方法去渲染 el属性\r\n  // 先调用render方法创建虚拟节点，再将虚拟节点渲染到页面上\r\n  vm._update(vm._render());\r\n}","let oldArrayProtoMethods = Array.prototype;\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\r\n\r\nlet methods = [\r\n  'push',\r\n  'pop',\r\n  'unshift',\r\n  'shift',\r\n  'splice',\r\n  'reverse',\r\n  'sort'\r\n]\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayProtoMethods[method].apply(this, arguments);\r\n    let inserted;\r\n    let ob = this.__ob__;\r\n    switch (methods) {\r\n      case 'push':\r\n        break;\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) ob.observeArray(inserted);\r\n    return result;\r\n  }\r\n})","function proxy (vm, data, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get () {\r\n      return vm[data][key];\r\n    },\r\n    set (newValue) {\r\n      vm[data][key] = newValue;\r\n    }\r\n  })\r\n}\r\n\r\nfunction defineProperty (target, key, value) {\r\n  Object.defineProperty(target, key, {\r\n    enumerable: false, // 不能被枚举\r\n    configurable: false,\r\n    value: value\r\n  })\r\n}\r\n\r\nexport {\r\n  proxy,\r\n  defineProperty\r\n}","import { arrayMethods } from \"./data/array\";\r\nimport { defineProperty, proxy } from \"./utils/util\";\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    let vm = this;\r\n    vm.$options = options;\r\n    initState(vm);\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n}\r\n\r\nconst initState = function initState (vm) {\r\n  const opts = vm.$options;\r\n  if (opts.props) {\r\n    initProps(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n}\r\n\r\nfunction initProps (vm) {\r\n\r\n}\r\n\r\nfunction initMethods (vm) {\r\n\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key);\r\n  }\r\n  observe(data);\r\n}\r\n\r\nclass Observe {\r\n  constructor(value) {\r\n    // 判断一个对象是否被检测过\r\n    defineProperty(value, '__ob__', this)\r\n    if (Array.isArray(value)) {\r\n      // 我希望调用 push shift unshift splice sort reverse pop\r\n      value.__proto__ = arrayMethods;\r\n      // 观测\r\n      this.observeArray(value);\r\n    } else {\r\n      this.walk(value);\r\n    }\r\n  }\r\n  walk (data) {\r\n    let keys = Object.keys(data);\r\n    keys.forEach(key => {\r\n      defineReactive(data, key, data[key]);\r\n    })\r\n  }\r\n  observeArray (value) {\r\n    value.forEach(item => {\r\n      observe(item);\r\n    })\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  observe(value);\r\n  Object.defineProperty(data, key, {\r\n    get () {\r\n      console.log('用户获取值了', value)\r\n      return value;\r\n    },\r\n    set (newValue) {\r\n      console.log('用户设置值了');\r\n      if (newValue === value) return;\r\n      observe(newValue);\r\n      value = newValue;\r\n    }\r\n  })\r\n}\r\n\r\nfunction observe (data) {\r\n  if (typeof data !== 'object' || data == null) return;\r\n  if (data.__ob__) {\r\n    return;\r\n  }\r\n  return new Observe(data)\r\n}","export function renderMixin (Vue) { // 用对象来描述dom的结构\r\n  // _c('div',{id:\"app\",style:{\"color\":\" red\"}},_v(\"你好：\"),_c('span',undefined,_v(\"阳光的\"+_s(name)+\"大人\")),_c('div',{id:\"age\"},_v(_s(age))))\r\n  Vue.prototype._c = function () {\r\n    // 创建元素\r\n    return createElement(...arguments);\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    // stringify\r\n    return createTextVnode(text);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    // 创建文本元素\r\n    return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const render = vm.$options.render;\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}\r\n\r\nfunction createElement (tag, data = {}, ...children) {\r\n  return vnode(tag, data, data.key, children)\r\n}\r\n\r\nfunction createTextVnode (text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode (tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n  }\r\n}","import { compileToFunction } from \"./compiler/index\"\r\nimport { lifecycleMixin, mountComponent } from \"./lifecycle\";\r\nimport { initMixin } from \"./state\";\r\nimport { renderMixin } from \"./vdom/index\";\r\n\r\nlet Vue = function (options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\n\r\nVue.prototype.$mount = function (el) {\r\n  // 挂载操作\r\n  const vm = this;\r\n  const options = vm.$options;\r\n  el = document.querySelector(el);\r\n  vm.$el = el;\r\n  if (!options.render) {\r\n    // 如果没render 将template转换成render方法\r\n\r\n    let template = options.template;\r\n    if (!template && el) {\r\n      template = el.outerHTML; // DOM知识部分\r\n    }\r\n    // 编译原理 将模板编译成render函数\r\n    const render = compileToFunction(template);\r\n    options.render = render;\r\n  }\r\n  // 挂载当前组件\r\n  mountComponent(vm, el);\r\n}\r\n\r\nexport default Vue;"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","obj","value","split","forEach","item","key","JSON","stringify","slice","gen","node","type","generate","text","test","tokens","lastIndex","match","index","exec","push","trim","join","genChildren","children","map","child","ast","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","parent","root","currentParent","stack","start","element","end","pop","chars","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","advance","substring","n","compileToFunction","template","render","Function","patch","oldVnode","vnode","el","createEle","parentElm","parentNode","insertBefore","nextsibling","removeChild","data","document","createElement","appendChild","createTextNode","lifecycleMixin","Vue","prototype","_update","vm","$el","mountComponent","_render","oldArrayProtoMethods","Array","arrayMethods","Object","create","methods","method","args","result","apply","arguments","inserted","ob","__ob__","observeArray","proxy","defineProperty","get","set","newValue","target","enumerable","configurable","initMixin","_init","options","$options","initState","$mount","opts","props","initData","_data","call","observe","Observe","isArray","__proto__","walk","keys","defineReactive","console","log","renderMixin","_c","_v","createTextVnode","_s","val","undefined","querySelector","outerHTML"],"mappings":"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"}